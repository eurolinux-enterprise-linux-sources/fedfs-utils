.\"@(#)fedfs-delete-junction.8"
.\"
.\" @file doc/man/fedfs-delete-junction.8
.\" @brief man page for fedfs-delete-junction client command
.\"

.\"
.\" Copyright 2011, 2013 Oracle.  All rights reserved.
.\"
.\" This file is part of fedfs-utils.
.\"
.\" fedfs-utils is free software; you can redistribute it and/or modify
.\" it under the terms of the GNU General Public License version 2.0 as
.\" published by the Free Software Foundation.
.\"
.\" fedfs-utils is distributed in the hope that it will be useful, but
.\" WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License version 2.0 for more details.
.\"
.\" You should have received a copy of the GNU General Public License
.\" version 2.0 along with fedfs-utils.  If not, see:
.\"
.\"	http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt
.\"
.TH FEDFS-DELETE-JUNCTION 8 "@pubdate@"
.SH NAME
fedfs-delete-junction \- send a FEDFS_DELETE_JUNCTION ADMIN protocol request
.SH SYNOPSIS
.B fedfs-delete-junction
.RB [ \-?d ]
.RB [ \-n
.IR nettype ]
.RB [ \-h
.IR hostname ]
.RB [ \-s
.IR security ]
.I path
.SH INTRODUCTION
RFC 5716 introduces the Federated File System (FedFS, for short).
FedFS is an extensible standardized mechanism
by which system administrators construct
a coherent namespace across multiple file servers using
.IR "file system referrals" .
For further details, see
.BR fedfs (7).
.P
FedFS-enabled file servers allow remote administrative access via an
authenticated RPC protocol known as the
.IR "FedFS ADMIN protocol" .
Using this protocol, FedFS administrators manage
FedFS junctions and NSDB connection parameter information
on remote FedFS-enabled file servers.
.SH DESCRIPTION
The
.BR fedfs-delete-junction (8)
command is part of a collection of low-level single-use programs
that is intended for testing the FedFS ADMIN protocol or for use in scripts.
It sends a single FEDFS_DELETE_JUNCTION request to a remote
FedFS ADMIN protocol service.
.P
The FEDFS_DELETE_JUNCTION request deletes a FedFS junction
in a local file system on a remote file server.
The
.BR fedfs-delete-junction (8)
command takes a single positional parameter which is the
pathname on the remote server of the junction to be deleted.
This pathname is relative to the root
of the local file system on the remote server.
.P
The FEDFS_DELETE_JUNCTION request does not remove the FSN record
associated with the deleted junction.
Other junctions may continue to refer to the FSN in the deleted junction.
.P
When no junction refers to this FSN, use the
.BR nsdb-delete-fsn (8)
command to delete the FSN and children FSL records.
Resolving a junction that contains an FSN UUID
without a matching FSN record on the NSDB
results in an error on the file server.
.P
.SH OPTIONS
.IP "\fB\-d, \-\-debug"
Enables debugging messages during operation.
.IP "\fB\-?, \-\-help"
Displays
.BR fedfs-delete-junction (8)
version information and a usage message on
.IR stderr .
.IP "\fB\-h, \-\-hostname=\fIhostname\fP"
Specifies the hostname of a remote FedFS ADMIN service.
If this option is not specified, the default value is
.BR localhost .
.IP "\fB\-n, \-\-nettype=\fInettype\fP"
Specifies the transport to use when contacting the remote FedFS ADMIN service.
Typically the
.I nettype
is one of
.B tcp
or
.BR udp .
If this option is not specified, the default value is
.BR netpath .
See
.BR rpc (3t)
for details.
.IP "\fB\-s, \-\-security=\fIflavor\fP"
Specifies the security flavor to use
when contacting the remote FedFS ADMIN service.
Valid flavors are
.BR sys ,
.BR unix ,
.BR krb5 ,
.BR krb5i ", and"
.BR krb5p .
If this option is not specified, the
.B unix
flavor is used.
See the
.B SECURITY
section of this man page for details.
.SH EXAMPLES
Suppose you are the FedFS administrator of the
.I example.net
FedFS domain.
To delete the existing FedFS junction
.I /export/junction1
on the file server
.IR fs.example.net ,
use:
.RS
.sp
$ fedfs-delete-junction -h fs.example.net /export/junction1
.SH SECURITY
By default, or if the
.B sys
and
.B unix
flavors are specified with the
.BI \-\-security= flavor
option, the
.BR fedfs-create-junction (8)
command uses AUTH_SYS security for the Remote Procedure Call.
AUTH_SYS has known weaknesses and should be avoided on untrusted networks.
.P
The RPC client uses the Kerberos v5 GSS mechanism
if a Kerberos security flavor is specified.
When specifying a Kerberos security flavor,
the user must first obtain a valid Kerberos ticket using
.BR kinit (1)
before running
.BR fedfs-create-junction (8).
.P
The AUTH_NONE security flavor is no longer supported by this implementation.
.SH "SEE ALSO"
.BR fedfs (7),
.BR rpc.fedfsd (8),
.BR kinit (1),
.BR rpc (3t)
.sp
RFC 5716 for FedFS requirements and overview
.SH COLOPHON
This page is part of the fedfs-utils package.
A description of the project and information about reporting bugs
can be found at
.IR http://wiki.linux-nfs.org/wiki/index.php/FedFsUtilsProject .
.SH "AUTHOR"
Chuck Lever <chuck.lever@oracle.com>
